#!/bin/sh
set -e

if command -v python3 >/dev/null 2>&1; then
  PYTHON_BIN="python3"
elif command -v python >/dev/null 2>&1; then
  PYTHON_BIN="python"
else
  echo "[pre-commit] Python is required but was not found."
  exit 1
fi

echo "[pre-commit] Staging docs changes..."
git add --all docs

echo "[pre-commit] Synchronizing navigation..."
"$PYTHON_BIN" tools/docs_tool.py generate-nav

echo "[pre-commit] Running docs validation..."
"$PYTHON_BIN" tools/docs_tool.py check-all

echo "[pre-commit] Staging generated mkdocs.yml..."
git add mkdocs.yml

echo "[pre-commit] Docs checks passed."
